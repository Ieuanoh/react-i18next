!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactI18next={},e.React)}(this,function(e,t){"use strict";var n="default"in t?t.default:t;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},s=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,l=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,u=Object.create?Object.create(null):{};function p(e,t,n,r,o){var i=t.indexOf("<",r),a=t.slice(r,-1===i?void 0:i);/^\s*$/.test(a)&&(a=" "),(!o&&i>-1&&n+e.length>=0||" "!==a)&&e.push({type:"text",content:a})}function f(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(f,"")+"</"+t.name+">"}}var d={parse:function(e,t){t||(t={}),t.components||(t.components=u);var n,r=[],o=-1,i=[],a={},f=!1;return e.replace(l,function(l,u){if(f){if(l!=="</"+n.name+">")return;f=!1}var d,g="/"!==l.charAt(1),h=0===l.indexOf("\x3c!--"),m=u+l.length,y=e.charAt(m);g&&!h&&(o++,"tag"===(n=function(e){var t,n=0,r=!0,o={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return e.replace(s,function(i){if("="===i)return r=!0,void n++;r?0===n?((c[i]||"/"===e.charAt(e.length-2))&&(o.voidElement=!0),o.name=i):(o.attrs[t]=i.replace(/^['"]|['"]$/g,""),t=void 0):(t&&(o.attrs[t]=t),t=i),n++,r=!1}),o}(l)).type&&t.components[n.name]&&(n.type="component",f=!0),n.voidElement||f||!y||"<"===y||p(n.children,e,o,m,t.ignoreWhitespace),a[n.tagName]=n,0===o&&r.push(n),(d=i[o-1])&&d.children.push(n),i[o]=n),(h||!g||n.voidElement)&&(h||o--,!f&&"<"!==y&&y&&p(d=-1===o?r:i[o].children,e,o,m,t.ignoreWhitespace))}),!r.length&&e.length&&p(r,e,0,0,t.ignoreWhitespace),r},stringify:function(e){return e.reduce(function(e,t){return e+f("",t)},"")}};let g,h,m={bindI18n:"languageChanging languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0};const y=n.createContext();function b(){return h}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m=o({},m,e)}function O(){return m}class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function w(e){g=e}function x(){return g}const E={type:"3rdParty",init(e){v(e.options.react),w(e)}};function S(e){return t=>new Promise(n=>{const r=N();e.getInitialProps?e.getInitialProps(t).then(e=>{n(o({},e,r))}):n(r)})}function N(){const e=x(),t=e.reportNamespaces?e.reportNamespaces.getUsedNamespaces():[],n={},r={};return e.languages.forEach(n=>{r[n]={},t.forEach(t=>{r[n][t]=e.getResourceBundle(n,t)||{}})}),n.initialI18nStore=r,n.initialLanguage=e.language,n}function I(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&(t[0]="react-i18next:: ".concat(t[0])),console.warn(...t)}}const k={};function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"==typeof t[0]&&k[t[0]]||("string"==typeof t[0]&&(k[t[0]]=new Date),I(...t))}function R(e,t,n){e.loadNamespaces(t,()=>{if(e.isInitialized)n();else{const t=()=>{setTimeout(()=>{e.off("initialized",t)},0),n()};e.on("initialized",t)}})}function A(e){return e.displayName||e.name||("string"==typeof e&&e.length>0?e:"Unknown")}function T(e){return e&&(e.children||e.props&&e.props.children)}function C(e){return e?e&&e.children?e.children:e.props&&e.props.children:[]}function z(e,t,r,i,a){if(""===t)return[];const c=i.transKeepBasicHtmlNodesFor||[],s=t&&new RegExp(c.join("|")).test(t);if(!e&&!s)return[t];const l={};!function e(t){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),t.forEach(t=>{"string"!=typeof t&&(T(t)?e(C(t)):"object"!=typeof t||n.isValidElement(t)||Object.assign(l,t))})}(e),t=r.services.interpolator.interpolate(t,o({},l,a),r.language);const u=function e(t,r){return"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]),r.reduce((r,a,c)=>{const l=a.children&&a.children[0]&&a.children[0].content;if("tag"===a.type){const u=t[parseInt(a.name,10)]||{},p=n.isValidElement(u);if("string"==typeof u)r.push(u);else if(T(u)){const t=C(u),i=e(t,a.children),s=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&e.every(e=>n.isValidElement(e))}(t)&&0===i.length?t:i;u.dummy&&(u.children=s),r.push(n.cloneElement(u,o({},u.props,{key:c}),s))}else if(s&&"object"==typeof u&&u.dummy&&!p){const i=e(t,a.children);r.push(n.cloneElement(u,o({},u.props,{key:c}),i))}else if(isNaN(a.name)&&i.transSupportBasicHtmlNodes)if(a.voidElement)r.push(n.createElement(a.name,{key:"".concat(a.name,"-").concat(c)}));else{const o=e(t,a.children);r.push(n.createElement(a.name,{key:"".concat(a.name,"-").concat(c)},o))}else if("object"!=typeof u||p)1===a.children.length&&l?r.push(n.cloneElement(u,o({},u.props,{key:c}),l)):r.push(u);else{const e=a.children[0]?l:null;e&&r.push(e)}}else"text"===a.type&&r.push(a.content);return r},[])}([{dummy:!0,children:e}],d.parse("<0>".concat(t,"</0>")));return C(u[0])}function L(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.i18n,i=(b()?t.useContext(y):{}).i18n,c=r||i||x();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new j),!c){P("You will need pass in an i18next instance by using initReactI18next");const e=[e=>e,{},!0];return e.t=(e=>e),e.i18n={},e.ready=!0,e}const s=o({},O(),c.options.react),l=n.useSuspense,u=void 0===l?s.useSuspense:l;let p=e||c.options&&c.options.defaultNS;p="string"==typeof p?[p]:p||["translation"],c.reportNamespaces.addUsedNamespaces&&c.reportNamespaces.addUsedNamespaces(p);const f=(c.isInitialized||c.initializedStoreOnce)&&p.every(e=>(function(e,t){if(!t.languages||!t.languages.length)return P("i18n.languages were undefined or empty",t.languages),!0;const n=t.languages[0],r=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===n.toLowerCase())return!0;const i=(e,n)=>{const r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!!t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||!(!i(n,e)||r&&!i(o,e))})(e,c));function d(){return{t:c.getFixedT(null,"fallback"===s.nsMode?p:p[0])}}const g=a(t.useState(d()),2),h=g[0],m=g[1];t.useEffect(()=>{let e=!0;const t=s.bindI18n,n=s.bindI18nStore;function r(){e&&m(d())}return f||u||R(c,p,()=>{e&&m(d())}),t&&c&&c.on(t,r),n&&c&&c.store.on(n,r),()=>{e=!1,t&&c&&t.split(" ").forEach(e=>c.off(e,r)),n&&c&&n.split(" ").forEach(e=>c.store.off(e,r))}});const v=[h.t,c,f];if(v.t=h.t,v.i18n=c,v.ready=f,f)return v;if(!f&&!u)return v;throw new Promise(e=>{R(c,p,()=>{m(d()),e()})})}function B(e,n){const r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).i18n,o=(b()?t.useContext(y):{}).i18n,i=r||o||x();e&&!i.initializedStoreOnce&&(i.services.resourceStore.data=e,i.initializedStoreOnce=!0),n&&!i.initializedLanguageOnce&&(i.changeLanguage(n),i.initializedLanguageOnce=!0)}e.Trans=function(e){let r=e.children,a=e.count,c=e.parent,s=e.i18nKey,l=e.tOptions,u=e.values,p=e.defaults,f=e.components,d=e.ns,g=e.i18n,h=e.t,m=i(e,["children","count","parent","i18nKey","tOptions","values","defaults","components","ns","i18n","t"]);const v=(b()?t.useContext(y):{}).i18n,j=g||v||x();if(!j)return P("You will need pass in an i18next instance by using i18nextReactModule"),r;const w=h||j.t.bind(j),E=o({},O(),j.options&&j.options.react),S=void 0!==c?c:E.defaultTransParent,N=p||function e(t,r,i,a){if(!r)return"";"[object Array]"!==Object.prototype.toString.call(r)&&(r=[r]);const c=a.transKeepBasicHtmlNodesFor||[];return r.forEach((r,i)=>{const s="".concat(i);if("string"==typeof r)t="".concat(t).concat(r);else if(T(r)){const n=c.indexOf(r.type)>-1&&1===Object.keys(r.props).length&&"string"==typeof T(r)?r.type:s;t=r.props&&r.props.i18nIsDynamicList?"".concat(t,"<").concat(n,"></").concat(n,">"):"".concat(t,"<").concat(n,">").concat(e("",C(r),i+1,a),"</").concat(n,">")}else if(n.isValidElement(r))t=c.indexOf(r.type)>-1&&0===Object.keys(r.props).length?"".concat(t,"<").concat(r.type,"/>"):"".concat(t,"<").concat(s,"></").concat(s,">");else if("object"==typeof r){const e=o({},r),n=e.format;delete e.format;const i=Object.keys(e);n&&1===i.length?t="".concat(t,"{{").concat(i[0],", ").concat(n,"}}"):1===i.length?t="".concat(t,"{{").concat(i[0],"}}"):I("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",r)}else I("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",r)}),t}("",r,0,E)||E.transEmptyNodeValue,k=E.hashTransKey,R=s||(k?k(N):N),A=o({},l,u,u?{}:{interpolation:{prefix:"#$?",suffix:"?$#"}},{defaultValue:N,count:a,ns:d}),L=R?w(R,A):N;return S?n.createElement(S,m,z(f||r,L,j,E,A)):z(f||r,L,j,E,A)},e.useTranslation=L,e.withTranslation=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){function i(i,c){const s=a(L(e,i),3),l=o({},i,{t:s[0],i18n:s[1],tReady:s[2]});return t.withRef&&c&&(l.ref=c),n.createElement(r,l)}return i.displayName="withI18nextTranslation(".concat(A(r),")"),t.withRef?n.forwardRef(i):i}},e.Translation=function(e){const t=e.ns,n=e.children,r=a(L(t,i(e,["ns","children"])),3),o=r[0],c=r[1],s=r[2];return n(o,{i18n:c,lng:c.language},s)},e.I18nextProvider=function(e){let t=e.i18n,r=e.children;return h=!0,n.createElement(y.Provider,{value:{i18n:t}},r)},e.withSSR=function(){return function(e){function t(t){let r=t.initialI18nStore,a=t.initialLanguage,c=i(t,["initialI18nStore","initialLanguage"]);return B(r,a),n.createElement(e,o({},c))}return t.getInitialProps=S(e),t.displayName="withI18nextSSR(".concat(A(e),")"),t}},e.useSSR=B,e.I18nContext=y,e.initReactI18next=E,e.setDefaults=v,e.getDefaults=O,e.setI18n=w,e.getI18n=x,e.composeInitialProps=S,e.getInitialProps=N,Object.defineProperty(e,"__esModule",{value:!0})});
